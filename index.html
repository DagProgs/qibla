<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" href="css/styles.css">
  <title>Мавлид на лезгинском языке</title>
  <script src="js/vue.js"></script>
  <style>
    nav {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    a {
      text-decoration: none;
      color: #2980b9;
      font-weight: bold;
    }

    /* Условный блок "Мои любимые" */
    .favorites-section {
      margin-bottom: 20px;
    }

    .favorites-link {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 18px;
      font-weight: bold;
      color: #2980b9;
      cursor: pointer;
    }

    .counter {
      background-color: #e74c3c;
      color: #fff;
      border-radius: 12px;
      padding: 2px 8px;
      font-size: 14px;
      min-width: 20px;
      text-align: center;
    }

    /* Остальные стили */
    ul {
      list-style-type: none;
      padding: 0;
      max-width: 900px;
      margin: 0 auto;
    }

    li {
      padding: 10px;
      margin-bottom: 8px;
      background: #ecf0f1;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.3s;
    }

    li:hover {
      background: #bdc3c7;
    }

    button {
      padding: 6px 12px;
      background-color: #3498db;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #2980b9;
    }

    /* Уведомление */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #2ecc71;
      color: #fff;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      font-size: 14px;
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 1000;
    }

    .notification.show {
      opacity: 1;
    }

    @media(max-width: 600px) {
      body {
        
      }

      li {
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <main>
    <div class="main_container">

      <!-- Первый экран -->
      <div class="full_pages" id="fullPages">
        <img src="img/madinah.png" alt="" class="bg" />
        <img src="img/cloud.png" alt="" class="cloud" />
        <h1 id="title">Мавлид</h1>
      </div>

      <!-- Второй экран -->
      <div class="second-screen" id="secondScreen">
        <div class="second-content">
          <div id="app">
            <nav>
              <!-- Показывать раздел "Мои любимые" только если есть избранные -->
              <div v-if="favoriteCount > 0" class="favorites-section">
                <div class="favorites-link" @click="goFavorites">
                  Избранные <div class="counter">{{ favoriteCount }}</div>
                </div>
              </div>
            </nav>
            <ul>
              <li v-for="poem in poems" :key="poem.id">
                <div @click="openPoem(poem.id)" style="cursor:pointer;">
                  <strong>{{ poem.title }}</strong>  {{ poem.author }}
                </div>
              </li>
            </ul>

            <!-- Уведомление -->
            <div class="notification" :class="{ show: showNotification }">{{ notificationMessage }}</div>
          </div>

          <script>
            new Vue({
              el: '#app',
              data: {
                poems: [],
                favoriteCount: 0,
                showNotification: false,
                notificationMessage: ''
              },
              created() {
                fetch('json/poems.json')
                  .then(res => res.json())
                  .then(data => {
                    this.poems = data;
                    this.updateFavoriteCount();
                  });
              },
              methods: {
                openPoem(id) {
                  window.location.href = `pages.html?poemId=${id}`;
                },
                goFavorites() {
                  window.location.href = 'favorites.html';
                },
                updateFavoriteCount() {
                  const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
                  this.favoriteCount = favorites.length;
                },
                showMessage(msg) {
                  this.notificationMessage = msg;
                  this.showNotification = true;
                  setTimeout(() => {
                    this.showNotification = false;
                  }, 3000);
                }
              },
              watch: {
                // Обновлять счетчик при изменении localStorage (или при вызове updateFavoriteCount)
                favoriteCount() {
                  // Можно дополнительно сделать, если нужно
                }
              }
            });
          </script>
        </div>
      </div>

      <!-- Шапка, которая появляется при уходе с первого экрана -->
      <div class="header-shape" id="headerShape">
        <div class="title">Мавлид</div>
        <img src="img/madinah.png" alt="иконка" />
      </div>

    </div>
  </main>

  <!-- Scripts -->
  <script src="js/full-screen.js"></script>
</body>

</html>